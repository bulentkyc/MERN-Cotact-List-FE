(this.webpackJsonpfe=this.webpackJsonpfe||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(17),s=n.n(o),i=(n(26),n(27),n(2)),l=n(0),r=function(e){var t=Object(i.f)();return Object(l.jsx)("div",{className:"wrapper",children:Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(e);var n={};n.email=e.target[0].value,n.pass=e.target[1].value;var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};"register"==e.nativeEvent.submitter.id?fetch("https://contactlist-io.herokuapp.com/auth/register",a).then((function(e){return e.json().then((function(e){"success"==e.status?alert("Congrats, you registered as well! Please login."):alert(e.message),console.log(e)}))})):"login"==e.nativeEvent.submitter.id&&fetch("https://contactlist-io.herokuapp.com/auth/login",a).then((function(e){return e.json().then((function(e){alert(e.message),console.log(e),localStorage.setItem("token",e.token),t.push("/contacts")}))}))},children:[Object(l.jsx)("input",{name:"email",type:"email"}),Object(l.jsx)("input",{name:"pass",type:"password"}),Object(l.jsxs)("section",{children:[Object(l.jsx)("input",{id:"register",type:"submit",value:"Register"}),Object(l.jsx)("input",{id:"login",type:"submit",value:"Login"})]})]})})},u=n(20),d=n(21),h=n(10),j=(n(37),function(e){var t=e.contact,n=e.deleteContact,c=t.fullName,o=t.email,s=t.phone,i=t.address,r=t.avatar,u={_id:t._id},d=Object(a.useState)(!1),j=Object(h.a)(d,2),p=j[0],f=j[1],b=Object(a.useState)("white"),m=Object(h.a)(b,2),O=m[0],g=m[1],v=function(e){var t,n=e.target.getAttribute("data-id");t="file"==n?e.target.files[0]:e.target.innerText,u[n]=t},x=function(e){console.log(e),13==e.charCode&&e.preventDefault()};return Object(l.jsxs)("div",{className:"card",style:{backgroundColor:O},children:[p?Object(l.jsx)("input",{"data-id":"file",type:"file",onChange:v}):Object(l.jsx)("img",{src:"https://contactlist-io.herokuapp.com/avatars/"+r}),Object(l.jsx)("div",{"data-id":"fullName",onKeyPress:x,onBlur:v,contentEditable:p,children:c}),Object(l.jsx)("div",{"data-id":"email",onKeyPress:x,onBlur:v,contentEditable:p,children:o}),Object(l.jsx)("div",{"data-id":"phone",onKeyPress:x,onBlur:v,contentEditable:p,children:s}),Object(l.jsx)("div",{"data-id":"address",onKeyPress:x,onBlur:v,contentEditable:p,children:i}),Object(l.jsx)("button",{onClick:function(){f(!p),g(p?"white":"lavender")},children:"\u270f\ufe0f"}),Object(l.jsx)("button",{onClick:function(){console.log(u);var e=new FormData;Object.keys(u).forEach((function(t){e.append(t,u[t])}));var t={method:"POST",headers:{"x-auth-token":localStorage.getItem("token")},body:e};fetch("https://contactlist-io.herokuapp.com/contacts/update",t).then((function(e){return e.json().then((function(e){"success"===e.status?(f(!1),g("green")):g("coral")}))})).catch((function(e){return g("coral")}))},children:"\ud83d\udcbe"}),Object(l.jsx)("button",{onClick:n,children:"\ud83d\uddd1\ufe0f"})]})});var p=function(){var e=this,t=Object(i.f)();Object(a.useEffect)((function(){localStorage.getItem("token")||t.push("/auth")}));var n={"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")},c=Object(a.useState)({fullName:"",email:"",phone:"",address:""}),o=Object(h.a)(c,2),s=o[0],r=o[1],p=Object(a.useState)([{_id:"1",fullName:"test",email:"t@t.com",phone:"123456",address:"test"}]),f=Object(h.a)(p,2),b=f[0],m=f[1],O=function(e,t){var n=Object(d.a)({},s);n[t]=e.target.value,r(n)};Object(a.useEffect)((function(){fetch("https://contactlist-io.herokuapp.com/contacts/all",{headers:n}).then((function(e){return e.json().then((function(e){"success"==e.status?m(e.data):console.log(e.message)}))}))}),[]);var g=function(e){fetch("https://contactlist-io.herokuapp.com/contacts/"+e,{method:"DELETE",headers:n}).then((function(e){return e.json().then((function(e){if("success"===e.status){alert(e.message);var t=b.filter((function(t){if(t._id!=e.data)return t}));m(t)}else alert("There's an error. For details please check the console."),console.log(e.message)}))})).catch((function(e){alert(e)}))},v=[];return"object"==typeof b&&b.length>0&&(v=b.map((function(t){return Object(l.jsx)(j,{contact:t,deleteContact:g.bind(e,t._id)},t._id)}))),Object(l.jsxs)("div",{className:"App",children:[Object(l.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("fullName",s.fullName),t.append("email",s.email),t.append("phone",s.phone),t.append("address",s.address),t.append("file",e.target[4].files[0]);var n={method:"POST",headers:{"x-auth-token":localStorage.getItem("token")},body:t};fetch("https://contactlist-io.herokuapp.com/contacts/new",n).then((function(e){return e.json().then((function(e){return m([].concat(Object(u.a)(b),[e]))}))}))},children:[Object(l.jsx)("input",{required:!0,placeholder:"Full name",value:s.fullName,onChange:function(e){return O(e,"fullName")}}),Object(l.jsx)("input",{type:"email",placeholder:"Email",value:s.email,onChange:function(e){return O(e,"email")}}),Object(l.jsx)("input",{type:"tel",placeholder:"Phone number",value:s.phone,onChange:function(e){return O(e,"phone")}}),Object(l.jsx)("input",{placeholder:"Address",value:s.address,onChange:function(e){return O(e,"address")}}),Object(l.jsx)("input",{type:"file"}),Object(l.jsx)("button",{children:"Create Contact"})]}),Object(l.jsx)("section",{className:"contact-list",children:v})]})},f=n(19),b=(n(38),function(){return Object(l.jsx)("div",{id:"get-contact",children:Object(l.jsxs)("form",{className:"contact-form",onSubmit:function(e){e.preventDefault(),console.log(e);var t=new FormData;t.append("fullName",e.target[0].value),t.append("email",e.target[1].value),t.append("phone",e.target[2].value),t.append("message",e.target[3].value),Array.from(e.target[4].files).forEach((function(e){t.append("attachs",e)})),console.log(1,t);var n,a=Object(f.a)(t.values());try{for(a.s();!(n=a.n()).done;){var c=n.value;console.log(c)}}catch(o){a.e(o)}finally{a.f()}console.log(3,Object.fromEntries(t));fetch("https://contactlist-io.herokuapp.com/get-contact",{method:"POST",body:t}).then((function(e){console.log(e),e.json().then((function(e){e.status,alert(e.message),console.log(e)}))}))},children:[Object(l.jsx)("input",{type:"text",placeholder:"Full Name"}),Object(l.jsx)("input",{type:"email",placeholder:"Email"}),Object(l.jsx)("input",{type:"tel",placeholder:"Phone"}),Object(l.jsx)("textarea",{type:"text",placeholder:"Message"}),Object(l.jsx)("input",{type:"file",multiple:!0}),Object(l.jsx)("button",{children:"Get Contact"})]})})}),m=n(7),O=(n(39),function(e){return Object(l.jsxs)("nav",{children:[Object(l.jsx)(m.b,{exact:!0,className:"nav-item",activeClassName:"active",to:"/",children:"Home"}),Object(l.jsx)(m.b,{exact:!0,className:"nav-item",activeClassName:"active",to:"/contacts",children:"Contacts"}),Object(l.jsx)(m.b,{exact:!0,className:"nav-item",activeClassName:"active",to:"/get-contact",children:"Get Contact"})]})});var g=function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)(O,{}),Object(l.jsxs)(i.c,{children:[Object(l.jsx)(i.a,{path:"/auth",children:Object(l.jsx)(r,{})}),Object(l.jsx)(i.a,{path:"/contacts",children:Object(l.jsx)(p,{})}),Object(l.jsx)(i.a,{path:"/get-contact",children:Object(l.jsx)(b,{})}),Object(l.jsx)(i.a,{path:"/",children:Object(l.jsx)(r,{})})]})]})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),o(e),s(e)}))};s.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(m.a,{basename:"/MERN-Cotact-List-FE",children:Object(l.jsx)(g,{})})}),document.getElementById("root")),v()}},[[40,1,2]]]);
//# sourceMappingURL=main.20f1b95f.chunk.js.map